@model List<GastosBrutos>
@{
    ViewBag.Title = "Lista de Gastos";
    ViewBag.NomePagina = "Lista de gastos";

    var sucesso = "Gasto excluído com sucesso!";
    var erro = "Não foi possível excluir o gasto!";
    var sucessocreate = "Gasto criado com sucesso!";
    var errocreate = "Não foi possível concluir o cadastro do gasto!";
    var sucessoupdate = "Gasto atualizado com sucesso!";
    var erroupdate = "Não foi possível atualizar o gasto!";
}

<head>
    <link rel="stylesheet" href="~/css/gastosbrutos/index.css">
</head>

<body class="gastobruto">
    <div class="msg1">
        <h1 id="msg1">Lista de Gastos Brutos ✏️</h1>
    </div>
    <table class="tabela">
        <tr>
            <th>Id</th>
            <th>Nome do Gasto</th>
            <th>Valor</th>
            <th>Data de pagamento</th>
            <th>Data de Vencimento</th>
        </tr>
        <div class="msg2">
            <h1 id="msg2">Você tem @Model.Count gastos</h1>
        </div>
        @if (TempData.ContainsKey("Excluiu"))
        {
            var excluiu = (bool)TempData["Excluiu"];
            if (excluiu)
            {
                <partial name="_MensagemInfo" model="@(sucesso)"></partial>
            }
            else
            {
                <partial name="_MensagemErro" model="@(erro)"></partial>
            }
        }
        @if (TempData.ContainsKey("Criou"))
        {
            var criou = (bool)TempData["Criou"];
            if (criou)
            {
                <partial name="_MensagemInfo" model="@(sucessocreate)"></partial>
            }
            else
            {
                <partial name="_MensagemErro" model="@(errocreate)"></partial>
            }
        }
        @if (TempData.ContainsKey("Atualizou"))
        {
            var atualizou = (bool)TempData["Atualizou"];
            if (atualizou)
            {
                <partial name="_MensagemInfo" model="@(sucessoupdate)"></partial>
            }
            else
            {
                <partial name="_MensagemErro" model="@(erroupdate)"></partial>
            }
        }

        @foreach (var gastos in Model)
        {
            <tr>
                <td class="tabela-info-td">@gastos.Id_gasto</td>
                <td class="tabela-info-td">@gastos.NomeGasto</td>
                <td class="tabela-info-td">@gastos.Valor.ToString("C")</td>
                <td class="tabela-info-td">@gastos.DataPagamentoB</td>
                <td class="tabela-info-td">@gastos.DataVencimentoB</td>
                <td class="botoes-cad">
                    <a href="/GastosBrutos/Update/@gastos.Id_gasto" class="btn btn-sm btn-primary" id="editar">Editar</a>
                    <a href="#" class="btn btn-sm btn-danger" id="apagar" data-toggle="modal"
                    data-target="#exampleModal">Apagar</a>
                </td>
            </tr>
            <!-- Modal de confirmação exclusão gasto -->
            <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
            aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel" style="color: black; ; font-size: 22px">
                                Confirmação de exclusão</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body" style="color: black; font-size: 22px" ;>
                            Tem certeza que deseja <span style="font-weight: bolder; color: red;">excluir</span> o gasto
                            <span style="font-weight: bolder; color: red;">@gastos.NomeGasto</span>?
                        </div>
                        <form asp-controller="GastosBrutos" asp-action="Delete" method="GET">
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                                <a href="/GastosBrutos/Delete/@gastos.Id_gasto" class="btn btn-danger">Confirmar</a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        }

    </table>
    <div class="adicionar">
        <a href="/gastosBrutos/create" class="btn btn-primary" id="adicionarC">Adicionar</a>
    </div>


</body>
