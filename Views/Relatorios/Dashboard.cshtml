@model List<Dashboard>
@{
    ViewBag.Title = "Dashboard";
    ViewBag.NomePagina = "Dashboard";
    Layout = "/Views/Shared/_LayoutDashboard.cshtml";
}

<head>
    <link rel="stylesheet" href="~/css/relatorios/dashboard.css">
</head>
<body class="dashboard">
    @foreach(var valor in Model)
    {
        // gráfico pizza
        decimal valorGasto = (decimal)@valor.TotalGasto;
        decimal valorReceita = (decimal)@valor.TotalPedidos;
        decimal lucro = valorReceita - valorGasto;
        
        ViewBag.Despesas = valorGasto;
        ViewBag.Receita = valorReceita;
        ViewBag.Lucro = lucro;
    }

    @* @foreach(var graficoLinha in ViewBag.Linha)
    {
        // gráfico linha
        decimal valorMes = graficoLinha.ValorMes;
        Console.WriteLine(valorMes);
        ViewBag.GraficoLinha = valorMes;
    } *@


    <div>
        <div id="pizza"></div>
        <p id="pizza-p">
            Receita Total: @ViewBag.Receita
            <br>
            Despesa Total: @ViewBag.Despesas
            <br>
            Lucro Total: @ViewBag.Lucro
        </p>
    </div>
    <hr class="separacao">

    <div id="linha"></div>

    <hr class="separacao">

    <div id="barra"></div>
</body>




@section Scripts{
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>
    <script>
    let despesa = '@ViewBag.Despesas'
    let receita = '@ViewBag.Receita'

    let linha = '@ViewBag.GraficoLinha'

    despesa = parseFloat(despesa.replace(',','.'));
    receita = parseFloat(receita.replace(',','.'));
    linha = parseFloat(linha.replace(',','.'));
    </script>
    <script src="~/js/pizza.js"></script>
    <script src="~/js/linha.js"></script>
    <script src="~/js/barra.js"></script>
}